<!DOCTYPE html>
<html>
<title>Admin management</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link href="../public/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
  $(document).ready(function(){
      var list_data_user_name;
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange=function(){
          if (xhttp.readyState == 4 && xhttp.status == 200){
            list_data_user_name = xhttp.responseText;
            var data_users = JSON.parse(list_data_user_name);
            let str = "";
            for(var i = 0 ; i < data_users.length ; i++) {
              str += "<tr> <td style='vertical-align: middle' >"+ data_users[i]['username'] +"</td> <td><button class=' w3-button w3-black w3-medium w3-round-large'>Xóa Quyền Admin</button></td> </tr>";
            }
            $('#list_users').html(str);
          }
      }
      xhttp.open("GET","http://192.168.118.6:3000/admin/view_all");
      xhttp.send();
    });
</script>
<body>

  <div class="container w3-center w3-panel w3-green">
    <h2 class="w3-opacity">  Admin Quản lý</h2>
  </div>

  <div class="container w3-bar w3-green">
    <button class="w3-bar-item w3-button w3-large" >Trang chủ</button>
    <button class="w3-bar-item w3-button w3-large" onclick="openCity('manager')">Phân Quyền</button>
    <button class="w3-bar-item w3-button w3-large" onclick="openCity('upload')">Đăng Bài</button>
    <button class="w3-bar-item w3-button w3-large" onclick="openCity('update')">Chỉnh Sửa</button>
    <button class="w3-bar-item w3-button w3-large" >Xuất dữ liệu Email</button>
    <button class="w3-bar-item w3-button w3-large w3-right"><a href="/admin/log_out">Đăng xuất</a></button>
  </div>

<div id="manager" class="container w3-display-container city" >
<div class="w3-panel">
  <form class="w3-container w3-card-4" action="/admin/add_account" method="POST">
    <p>
    <label>Tài khoản</label>
    <input class="w3-input" type="text" name="uname" /></p>
    <p>
    <label>Mật Khẩu</label>
    <input class="w3-input" type="password" name="passwd" /></p>
    <p>
    <label><%= message %></label>
    <input class="w3-button w3-block w3-green" type="submit" value="Gửi"></p>
  </form>
</div>
<div class="w3-container ">
    <table class="w3-table-all w3-centered w3-card-4" id="list_users">
        <tr>
          <th>Tên người dùng</th>
          <th></th>
        </tr>
      </table>
    </div>
</div>
</div>

<div id="upload" class="container w3-display-container city" style="display:none">
  <form class="w3-container w3-card-4 " action="/admin/add_view" method="GET">
    <p>
    <label>Tiêu đề</label>
    <input class="w3-input" type="text" name="title_video" /></p>
    <p>
    <label>ID của Youtube</label>
    <input class="w3-input" type="text" name="id_video" /></p>
    <p>
    <label>Miêu tả</label>
    <textarea class="w3-input" placeholder="Write something.." name="description" /></textarea>
    </br>
    <input class="w3-button w3-green" type="submit" value="Đăng"></p>
  </form>
</div>
<div id="update" class="container w3-display-container city" style="display:none">
      <form class="w3-container w3-card-4 " action="/admin/add_view" method="GET">
        <p>
        <label>ID của Youtube</label>
        <input class="w3-input" type="text" name="id_video" /></p>
        <p>
        <label>Tiêu đề</label>
        <input class="w3-input" type="text" name="title_video" /></p>
        <p>
        <label>Miêu tả</label>
        <textarea class="w3-input" placeholder="Write something.." name="description" /></textarea>
        </br>
        <input class="w3-button w3-green" type="submit" value="Lưu"></p>
      </form>
  
</div>
<script>
  function openCity(cityName) {
      var i;
      var x = document.getElementsByClassName("city");
      for (i = 0; i < x.length; i++) {
        x[i].style.display = "none";  
      }
      document.getElementById(cityName).style.display = "block";  
  }
</script>
</body>
</html>
